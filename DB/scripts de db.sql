--------------------------------------------------------
-- Archivo creado  - domingo-septiembre-28-2025   
--------------------------------------------------------
--------------------------------------------------------
--  DDL for Table CASOS
--------------------------------------------------------

  CREATE TABLE "HELPDESSK"."CASOS" 
   (	"ID_CASO" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"ID_EMPLEADO_SOLICITA" NUMBER, 
	"ID_TIPO_INCIDENCIA" NUMBER, 
	"TITULO" VARCHAR2(200 BYTE), 
	"DESCRIPCION" CLOB, 
	"ID_PRIORIDAD" NUMBER, 
	"FECHA_CREACION" TIMESTAMP (6) DEFAULT SYSTIMESTAMP, 
	"ID_ESTADO_ACTUAL" NUMBER, 
	"FECHA_CIERRE" TIMESTAMP (6), 
	"TIEMPO_RESOLUCION" INTERVAL DAY (2) TO SECOND (6)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" 
 LOB ("DESCRIPCION") STORE AS SECUREFILE (
  TABLESPACE "USERS" ENABLE STORAGE IN ROW 4000 CHUNK 8192
  NOCACHE LOGGING  NOCOMPRESS  KEEP_DUPLICATES 
  STORAGE(INITIAL 262144 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) ;
--------------------------------------------------------
--  DDL for Table DEPARTAMENTOS
--------------------------------------------------------

  CREATE TABLE "HELPDESSK"."DEPARTAMENTOS" 
   (	"ID_DEPARTAMENTO" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"NOMBRE" VARCHAR2(100 BYTE), 
	"DESCRIPCION" VARCHAR2(255 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table EMPLEADO
--------------------------------------------------------

  CREATE TABLE "HELPDESSK"."EMPLEADO" 
   (	"ID_EMPLEADO" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"ID_DEPARTAMENTO" NUMBER, 
	"NOMBRE" VARCHAR2(100 BYTE), 
	"APELLIDO" VARCHAR2(100 BYTE), 
	"CORREO" VARCHAR2(150 BYTE), 
	"TELEFONO" VARCHAR2(20 BYTE), 
	"ROL" VARCHAR2(50 BYTE), 
	"ACTIVO" CHAR(1 BYTE) DEFAULT 'S'
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table ENCUESTA_SATISFACCION
--------------------------------------------------------

  CREATE TABLE "HELPDESSK"."ENCUESTA_SATISFACCION" 
   (	"ID_ENCUESTA" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"ID_CASO" NUMBER, 
	"CALIFICACION" NUMBER, 
	"COMENTARIO" VARCHAR2(500 BYTE), 
	"FECHA_RESPUESTA" TIMESTAMP (6) DEFAULT SYSTIMESTAMP
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table ESTADO_CASO
--------------------------------------------------------

  CREATE TABLE "HELPDESSK"."ESTADO_CASO" 
   (	"ID_ESTADO" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"NOMBRE" VARCHAR2(50 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table HISTORIAL_CASO
--------------------------------------------------------

  CREATE TABLE "HELPDESSK"."HISTORIAL_CASO" 
   (	"ID_HISTORIAL" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"ID_CASO" NUMBER, 
	"FECHA" DATE DEFAULT SYSDATE, 
	"COMENTARIO" CLOB, 
	"ID_ESTADO" NUMBER, 
	"ID_EMPLEADO" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" 
 LOB ("COMENTARIO") STORE AS SECUREFILE (
  TABLESPACE "USERS" ENABLE STORAGE IN ROW 4000 CHUNK 8192
  NOCACHE LOGGING  NOCOMPRESS  KEEP_DUPLICATES 
  STORAGE(INITIAL 262144 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) ;
--------------------------------------------------------
--  DDL for Table PRIORIDAD
--------------------------------------------------------

  CREATE TABLE "HELPDESSK"."PRIORIDAD" 
   (	"ID_PRIORIDAD" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"NOMBRE" VARCHAR2(50 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table NOTIFICACIONES
--------------------------------------------------------

  CREATE TABLE "HELPDESSK"."NOTIFICACIONES" 
   (	"ID_NOTIFICACION" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"ID_CASO" NUMBER, 
	"ID_EMPLEADO" NUMBER, 
	"MENSAJE" VARCHAR2(255 BYTE), 
	"ESTADO" VARCHAR2(50 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table REPUESTOS
--------------------------------------------------------

  CREATE TABLE "HELPDESSK"."REPUESTOS" 
   (	"ID_REPUESTO" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"NOMBRE" VARCHAR2(100 BYTE), 
	"DESCRIPCION" VARCHAR2(255 BYTE), 
	"STOCK" NUMBER DEFAULT 0, 
	"PRECIO_UNITARIO" NUMBER(10,2)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table SOLICITUD_REPUESTOS
--------------------------------------------------------

  CREATE TABLE "HELPDESSK"."SOLICITUD_REPUESTOS" 
   (	"ID_CASO" NUMBER, 
	"ID_REPUESTO" NUMBER, 
	"CANTIDAD" NUMBER DEFAULT 1
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table TIPO_INCIDENCIA
--------------------------------------------------------

  CREATE TABLE "HELPDESSK"."TIPO_INCIDENCIA" 
   (	"ID_TIPO" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"TIPO" VARCHAR2(100 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table USUARIOS
--------------------------------------------------------

  CREATE TABLE "HELPDESSK"."USUARIOS" 
   (	"ID_USUARIO" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"ID_EMPLEADO" NUMBER, 
	"USERNAME" VARCHAR2(100 BYTE), 
	"PASSWORD" VARCHAR2(255 BYTE), 
	"ACTIVO" CHAR(1 BYTE) DEFAULT 'S', 
	"ULTIMO_LOGIN" TIMESTAMP (6)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for View SLA_VIEW
--------------------------------------------------------

  CREATE OR REPLACE FORCE EDITIONABLE VIEW "HELPDESSK"."SLA_VIEW" ("ID_CASO", "FECHA_CREACION", "FECHA_CIERRE", "TIEMPO_RESOLUCION", "TIEMPO_PRIMER_RESPUESTA") AS 
  SELECT 
    c.id_caso,
    c.fecha_creacion,
    c.fecha_cierre,
    -- tiempo total de resolución
    CASE 
        WHEN c.fecha_cierre IS NOT NULL THEN c.fecha_cierre - c.fecha_creacion
        ELSE NULL
    END AS tiempo_resolucion,
    -- tiempo hasta la primera respuesta (primer historial distinto de "Abierto")
    (
        SELECT MIN(h.fecha) - c.fecha_creacion
        FROM Historial_Caso h
        WHERE h.id_caso = c.id_caso
          AND h.id_estado != (SELECT id_estado FROM Estado_Caso WHERE nombre = 'Abierto')
    ) AS tiempo_primer_respuesta
FROM Casos c
;
REM INSERTING into HELPDESSK.CASOS
SET DEFINE OFF;
Insert into HELPDESSK.CASOS (ID_CASO,ID_EMPLEADO_SOLICITA,ID_TIPO_INCIDENCIA,TITULO,ID_PRIORIDAD,FECHA_CREACION,ID_ESTADO_ACTUAL,FECHA_CIERRE,TIEMPO_RESOLUCION) values ('23','1','1','Pruebas','1',to_timestamp('27/09/25 01:15:03,514000000','DD/MM/RR HH24:MI:SSXFF'),null,null,null);
Insert into HELPDESSK.CASOS (ID_CASO,ID_EMPLEADO_SOLICITA,ID_TIPO_INCIDENCIA,TITULO,ID_PRIORIDAD,FECHA_CREACION,ID_ESTADO_ACTUAL,FECHA_CIERRE,TIEMPO_RESOLUCION) values ('24','1','1','Pruebas','1',to_timestamp('27/09/25 01:18:39,914000000','DD/MM/RR HH24:MI:SSXFF'),'1',null,null);
Insert into HELPDESSK.CASOS (ID_CASO,ID_EMPLEADO_SOLICITA,ID_TIPO_INCIDENCIA,TITULO,ID_PRIORIDAD,FECHA_CREACION,ID_ESTADO_ACTUAL,FECHA_CIERRE,TIEMPO_RESOLUCION) values ('25','1','3','pruebajeje','3',to_timestamp('27/09/25 03:00:59,942000000','DD/MM/RR HH24:MI:SSXFF'),'1',null,null);
Insert into HELPDESSK.CASOS (ID_CASO,ID_EMPLEADO_SOLICITA,ID_TIPO_INCIDENCIA,TITULO,ID_PRIORIDAD,FECHA_CREACION,ID_ESTADO_ACTUAL,FECHA_CIERRE,TIEMPO_RESOLUCION) values ('27','1','1','prueba3','3',to_timestamp('27/09/25 03:20:45,027000000','DD/MM/RR HH24:MI:SSXFF'),'1',null,null);
Insert into HELPDESSK.CASOS (ID_CASO,ID_EMPLEADO_SOLICITA,ID_TIPO_INCIDENCIA,TITULO,ID_PRIORIDAD,FECHA_CREACION,ID_ESTADO_ACTUAL,FECHA_CIERRE,TIEMPO_RESOLUCION) values ('28','1','1','prueba4','3',to_timestamp('27/09/25 03:24:50,891000000','DD/MM/RR HH24:MI:SSXFF'),'1',null,null);
Insert into HELPDESSK.CASOS (ID_CASO,ID_EMPLEADO_SOLICITA,ID_TIPO_INCIDENCIA,TITULO,ID_PRIORIDAD,FECHA_CREACION,ID_ESTADO_ACTUAL,FECHA_CIERRE,TIEMPO_RESOLUCION) values ('29','1','2','prueba5','1',to_timestamp('27/09/25 03:32:05,782000000','DD/MM/RR HH24:MI:SSXFF'),'1',null,null);
Insert into HELPDESSK.CASOS (ID_CASO,ID_EMPLEADO_SOLICITA,ID_TIPO_INCIDENCIA,TITULO,ID_PRIORIDAD,FECHA_CREACION,ID_ESTADO_ACTUAL,FECHA_CIERRE,TIEMPO_RESOLUCION) values ('1','2','1','Impresora bloqueada','1',to_timestamp('15/09/25 05:57:32,518000000','DD/MM/RR HH24:MI:SSXFF'),'3',to_timestamp('25/09/25 01:33:30,829000000','DD/MM/RR HH24:MI:SSXFF'),null);
Insert into HELPDESSK.CASOS (ID_CASO,ID_EMPLEADO_SOLICITA,ID_TIPO_INCIDENCIA,TITULO,ID_PRIORIDAD,FECHA_CREACION,ID_ESTADO_ACTUAL,FECHA_CIERRE,TIEMPO_RESOLUCION) values ('2','2','2','Pantalla congelada','2',to_timestamp('15/09/25 05:57:32,539000000','DD/MM/RR HH24:MI:SSXFF'),'2',null,null);
Insert into HELPDESSK.CASOS (ID_CASO,ID_EMPLEADO_SOLICITA,ID_TIPO_INCIDENCIA,TITULO,ID_PRIORIDAD,FECHA_CREACION,ID_ESTADO_ACTUAL,FECHA_CIERRE,TIEMPO_RESOLUCION) values ('4','1','2','Falla PC','1',to_timestamp('16/09/25 12:56:21,143000000','DD/MM/RR HH24:MI:SSXFF'),null,null,null);
Insert into HELPDESSK.CASOS (ID_CASO,ID_EMPLEADO_SOLICITA,ID_TIPO_INCIDENCIA,TITULO,ID_PRIORIDAD,FECHA_CREACION,ID_ESTADO_ACTUAL,FECHA_CIERRE,TIEMPO_RESOLUCION) values ('30','1','1','PRUEBA','1',to_timestamp('27/09/25 08:17:44,369000000','DD/MM/RR HH24:MI:SSXFF'),'1',null,null);
Insert into HELPDESSK.CASOS (ID_CASO,ID_EMPLEADO_SOLICITA,ID_TIPO_INCIDENCIA,TITULO,ID_PRIORIDAD,FECHA_CREACION,ID_ESTADO_ACTUAL,FECHA_CIERRE,TIEMPO_RESOLUCION) values ('3','2','1','Impresora no imprime','1',to_timestamp('16/09/25 09:38:21,682000000','DD/MM/RR HH24:MI:SSXFF'),'3',to_timestamp('25/09/25 02:39:24,292000000','DD/MM/RR HH24:MI:SSXFF'),null);
Insert into HELPDESSK.CASOS (ID_CASO,ID_EMPLEADO_SOLICITA,ID_TIPO_INCIDENCIA,TITULO,ID_PRIORIDAD,FECHA_CREACION,ID_ESTADO_ACTUAL,FECHA_CIERRE,TIEMPO_RESOLUCION) values ('5','2','1','Impresora bloqueada','1',to_timestamp('16/09/25 15:30:01,831000000','DD/MM/RR HH24:MI:SSXFF'),'1',null,null);
Insert into HELPDESSK.CASOS (ID_CASO,ID_EMPLEADO_SOLICITA,ID_TIPO_INCIDENCIA,TITULO,ID_PRIORIDAD,FECHA_CREACION,ID_ESTADO_ACTUAL,FECHA_CIERRE,TIEMPO_RESOLUCION) values ('26','1','1','prueba2','2',to_timestamp('27/09/25 03:03:36,391000000','DD/MM/RR HH24:MI:SSXFF'),'1',null,null);
Insert into HELPDESSK.CASOS (ID_CASO,ID_EMPLEADO_SOLICITA,ID_TIPO_INCIDENCIA,TITULO,ID_PRIORIDAD,FECHA_CREACION,ID_ESTADO_ACTUAL,FECHA_CIERRE,TIEMPO_RESOLUCION) values ('21','2','1','prueba','1',to_timestamp('26/09/25 23:41:24,615000000','DD/MM/RR HH24:MI:SSXFF'),null,null,null);
REM INSERTING into HELPDESSK.DEPARTAMENTOS
SET DEFINE OFF;
Insert into HELPDESSK.DEPARTAMENTOS (ID_DEPARTAMENTO,NOMBRE,DESCRIPCION) values ('1','Soporte Técnico','Departamento de soporte técnico');
Insert into HELPDESSK.DEPARTAMENTOS (ID_DEPARTAMENTO,NOMBRE,DESCRIPCION) values ('2','Sistemas','Departamento de sistemas y TI');
REM INSERTING into HELPDESSK.EMPLEADO
SET DEFINE OFF;
Insert into HELPDESSK.EMPLEADO (ID_EMPLEADO,ID_DEPARTAMENTO,NOMBRE,APELLIDO,CORREO,TELEFONO,ROL,ACTIVO) values ('1','1','Juan','Pérez','juan.perez@empresa.com','555-1234','AGENTE','N');
Insert into HELPDESSK.EMPLEADO (ID_EMPLEADO,ID_DEPARTAMENTO,NOMBRE,APELLIDO,CORREO,TELEFONO,ROL,ACTIVO) values ('2','2','Ana','Gómez','ana.gomez@empresa.com','555-5678','USUARIO','S');
Insert into HELPDESSK.EMPLEADO (ID_EMPLEADO,ID_DEPARTAMENTO,NOMBRE,APELLIDO,CORREO,TELEFONO,ROL,ACTIVO) values ('3','1','Marlon','Yodani','myodani@empresa.com','12345678','AGENTE','N');
REM INSERTING into HELPDESSK.ENCUESTA_SATISFACCION
SET DEFINE OFF;
Insert into HELPDESSK.ENCUESTA_SATISFACCION (ID_ENCUESTA,ID_CASO,CALIFICACION,COMENTARIO,FECHA_RESPUESTA) values ('1','1','5','Servicio rápido y eficiente',to_timestamp('15/09/25 05:57:32,952000000','DD/MM/RR HH24:MI:SSXFF'));
Insert into HELPDESSK.ENCUESTA_SATISFACCION (ID_ENCUESTA,ID_CASO,CALIFICACION,COMENTARIO,FECHA_RESPUESTA) values ('2','2','4','Solución efectiva, pero tardó un poco',to_timestamp('15/09/25 05:57:32,958000000','DD/MM/RR HH24:MI:SSXFF'));
REM INSERTING into HELPDESSK.ESTADO_CASO
SET DEFINE OFF;
Insert into HELPDESSK.ESTADO_CASO (ID_ESTADO,NOMBRE) values ('1','Asignado');
Insert into HELPDESSK.ESTADO_CASO (ID_ESTADO,NOMBRE) values ('2','En Proceso');
Insert into HELPDESSK.ESTADO_CASO (ID_ESTADO,NOMBRE) values ('3','Cerrado');
Insert into HELPDESSK.ESTADO_CASO (ID_ESTADO,NOMBRE) values ('4','Rechazado');
REM INSERTING into HELPDESSK.HISTORIAL_CASO
SET DEFINE OFF;
Insert into HELPDESSK.HISTORIAL_CASO (ID_HISTORIAL,ID_CASO,FECHA,ID_ESTADO,ID_EMPLEADO) values ('21','1',to_date('25/09/25','DD/MM/RR'),'3','2');
Insert into HELPDESSK.HISTORIAL_CASO (ID_HISTORIAL,ID_CASO,FECHA,ID_ESTADO,ID_EMPLEADO) values ('22','3',to_date('25/09/25','DD/MM/RR'),'3','2');
Insert into HELPDESSK.HISTORIAL_CASO (ID_HISTORIAL,ID_CASO,FECHA,ID_ESTADO,ID_EMPLEADO) values ('24','24',to_date('27/09/25','DD/MM/RR'),'1','1');
Insert into HELPDESSK.HISTORIAL_CASO (ID_HISTORIAL,ID_CASO,FECHA,ID_ESTADO,ID_EMPLEADO) values ('25','25',to_date('27/09/25','DD/MM/RR'),'1','1');
Insert into HELPDESSK.HISTORIAL_CASO (ID_HISTORIAL,ID_CASO,FECHA,ID_ESTADO,ID_EMPLEADO) values ('27','27',to_date('27/09/25','DD/MM/RR'),'1','1');
Insert into HELPDESSK.HISTORIAL_CASO (ID_HISTORIAL,ID_CASO,FECHA,ID_ESTADO,ID_EMPLEADO) values ('28','28',to_date('27/09/25','DD/MM/RR'),'1','1');
Insert into HELPDESSK.HISTORIAL_CASO (ID_HISTORIAL,ID_CASO,FECHA,ID_ESTADO,ID_EMPLEADO) values ('29','29',to_date('27/09/25','DD/MM/RR'),'1','1');
Insert into HELPDESSK.HISTORIAL_CASO (ID_HISTORIAL,ID_CASO,FECHA,ID_ESTADO,ID_EMPLEADO) values ('1','1',to_date('15/09/25','DD/MM/RR'),'1','1');
Insert into HELPDESSK.HISTORIAL_CASO (ID_HISTORIAL,ID_CASO,FECHA,ID_ESTADO,ID_EMPLEADO) values ('2','2',to_date('15/09/25','DD/MM/RR'),'2','1');
Insert into HELPDESSK.HISTORIAL_CASO (ID_HISTORIAL,ID_CASO,FECHA,ID_ESTADO,ID_EMPLEADO) values ('30','30',to_date('27/09/25','DD/MM/RR'),'1','1');
Insert into HELPDESSK.HISTORIAL_CASO (ID_HISTORIAL,ID_CASO,FECHA,ID_ESTADO,ID_EMPLEADO) values ('3','5',to_date('16/09/25','DD/MM/RR'),'1','2');
Insert into HELPDESSK.HISTORIAL_CASO (ID_HISTORIAL,ID_CASO,FECHA,ID_ESTADO,ID_EMPLEADO) values ('26','26',to_date('27/09/25','DD/MM/RR'),'1','1');
REM INSERTING into HELPDESSK.PRIORIDAD
SET DEFINE OFF;
Insert into HELPDESSK.PRIORIDAD (ID_PRIORIDAD,NOMBRE) values ('1','Alta');
Insert into HELPDESSK.PRIORIDAD (ID_PRIORIDAD,NOMBRE) values ('2','Media');
Insert into HELPDESSK.PRIORIDAD (ID_PRIORIDAD,NOMBRE) values ('3','Baja');
REM INSERTING into HELPDESSK.NOTIFICACIONES
SET DEFINE OFF;
Insert into HELPDESSK.NOTIFICACIONES (ID_NOTIFICACION,ID_CASO,ID_EMPLEADO,MENSAJE,ESTADO) values ('1','1','1','Se asignó técnico al caso','Enviado');
Insert into HELPDESSK.NOTIFICACIONES (ID_NOTIFICACION,ID_CASO,ID_EMPLEADO,MENSAJE,ESTADO) values ('2','2','1','Caso en revisión por soporte','Encolado');
REM INSERTING into HELPDESSK.REPUESTOS
SET DEFINE OFF;
Insert into HELPDESSK.REPUESTOS (ID_REPUESTO,NOMBRE,DESCRIPCION,STOCK,PRECIO_UNITARIO) values ('1','Toner HP','Toner para impresora HP','10','75,5');
Insert into HELPDESSK.REPUESTOS (ID_REPUESTO,NOMBRE,DESCRIPCION,STOCK,PRECIO_UNITARIO) values ('2','Cable HDMI','Cable HDMI 2 metros','20','15');
REM INSERTING into HELPDESSK.SOLICITUD_REPUESTOS
SET DEFINE OFF;
Insert into HELPDESSK.SOLICITUD_REPUESTOS (ID_CASO,ID_REPUESTO,CANTIDAD) values ('1','1','1');
Insert into HELPDESSK.SOLICITUD_REPUESTOS (ID_CASO,ID_REPUESTO,CANTIDAD) values ('2','2','1');
REM INSERTING into HELPDESSK.TIPO_INCIDENCIA
SET DEFINE OFF;
Insert into HELPDESSK.TIPO_INCIDENCIA (ID_TIPO,TIPO) values ('1','Impresora no funciona');
Insert into HELPDESSK.TIPO_INCIDENCIA (ID_TIPO,TIPO) values ('2','Pantalla congelada');
Insert into HELPDESSK.TIPO_INCIDENCIA (ID_TIPO,TIPO) values ('3','Otro');
REM INSERTING into HELPDESSK.USUARIOS
SET DEFINE OFF;
Insert into HELPDESSK.USUARIOS (ID_USUARIO,ID_EMPLEADO,USERNAME,PASSWORD,ACTIVO,ULTIMO_LOGIN) values ('5','1','juan.perez','$2b$10$/dXsh09c22HSh/Vcyp1mNuJGXo4XCJIZO.FAZsZtzzMTL3y9/AOBK','S',to_timestamp('27/09/25 19:57:37,138000000','DD/MM/RR HH24:MI:SSXFF'));
Insert into HELPDESSK.USUARIOS (ID_USUARIO,ID_EMPLEADO,USERNAME,PASSWORD,ACTIVO,ULTIMO_LOGIN) values ('6','2','ana.gomez','$2b$10$rFMJumtUA5BfyeHKL2d8ouE71sgSyhiyUqcQ/dHROO/mK3CEq.Vwq','S',to_timestamp('27/09/25 03:45:02,184000000','DD/MM/RR HH24:MI:SSXFF'));
Insert into HELPDESSK.USUARIOS (ID_USUARIO,ID_EMPLEADO,USERNAME,PASSWORD,ACTIVO,ULTIMO_LOGIN) values ('8','1','nuevoUsuario','$2b$10$P1Sg4nkGtgdu6Ktpmi.hJub0NF789Ep9dYChvgAs24gpCpqKSWJCS','S',to_timestamp('25/09/25 14:03:29,603000000','DD/MM/RR HH24:MI:SSXFF'));
Insert into HELPDESSK.USUARIOS (ID_USUARIO,ID_EMPLEADO,USERNAME,PASSWORD,ACTIVO,ULTIMO_LOGIN) values ('17','1','prueba','$2b$10$wCl2CCJBz4hAR2Vcv1Vfte5QJdYgcthD8MpWX0gsUJPQCgzaijEzu','S',to_timestamp('27/09/25 02:35:24,336000000','DD/MM/RR HH24:MI:SSXFF'));
REM INSERTING into HELPDESSK.SLA_VIEW
SET DEFINE OFF;
Insert into HELPDESSK.SLA_VIEW (ID_CASO,FECHA_CREACION,FECHA_CIERRE,TIEMPO_RESOLUCION,TIEMPO_PRIMER_RESPUESTA) values ('23',to_timestamp('27/09/25 01:15:03,514000000','DD/MM/RR HH24:MI:SSXFF'),null,null,null);
Insert into HELPDESSK.SLA_VIEW (ID_CASO,FECHA_CREACION,FECHA_CIERRE,TIEMPO_RESOLUCION,TIEMPO_PRIMER_RESPUESTA) values ('24',to_timestamp('27/09/25 01:18:39,914000000','DD/MM/RR HH24:MI:SSXFF'),null,null,null);
Insert into HELPDESSK.SLA_VIEW (ID_CASO,FECHA_CREACION,FECHA_CIERRE,TIEMPO_RESOLUCION,TIEMPO_PRIMER_RESPUESTA) values ('25',to_timestamp('27/09/25 03:00:59,942000000','DD/MM/RR HH24:MI:SSXFF'),null,null,null);
Insert into HELPDESSK.SLA_VIEW (ID_CASO,FECHA_CREACION,FECHA_CIERRE,TIEMPO_RESOLUCION,TIEMPO_PRIMER_RESPUESTA) values ('27',to_timestamp('27/09/25 03:20:45,027000000','DD/MM/RR HH24:MI:SSXFF'),null,null,null);
Insert into HELPDESSK.SLA_VIEW (ID_CASO,FECHA_CREACION,FECHA_CIERRE,TIEMPO_RESOLUCION,TIEMPO_PRIMER_RESPUESTA) values ('28',to_timestamp('27/09/25 03:24:50,891000000','DD/MM/RR HH24:MI:SSXFF'),null,null,null);
Insert into HELPDESSK.SLA_VIEW (ID_CASO,FECHA_CREACION,FECHA_CIERRE,TIEMPO_RESOLUCION,TIEMPO_PRIMER_RESPUESTA) values ('29',to_timestamp('27/09/25 03:32:05,782000000','DD/MM/RR HH24:MI:SSXFF'),null,null,null);
Insert into HELPDESSK.SLA_VIEW (ID_CASO,FECHA_CREACION,FECHA_CIERRE,TIEMPO_RESOLUCION,TIEMPO_PRIMER_RESPUESTA) values ('1',to_timestamp('15/09/25 05:57:32,518000000','DD/MM/RR HH24:MI:SSXFF'),to_timestamp('25/09/25 01:33:30,829000000','DD/MM/RR HH24:MI:SSXFF'),'+09 19:35:58.311000',null);
Insert into HELPDESSK.SLA_VIEW (ID_CASO,FECHA_CREACION,FECHA_CIERRE,TIEMPO_RESOLUCION,TIEMPO_PRIMER_RESPUESTA) values ('2',to_timestamp('15/09/25 05:57:32,539000000','DD/MM/RR HH24:MI:SSXFF'),null,null,null);
Insert into HELPDESSK.SLA_VIEW (ID_CASO,FECHA_CREACION,FECHA_CIERRE,TIEMPO_RESOLUCION,TIEMPO_PRIMER_RESPUESTA) values ('4',to_timestamp('16/09/25 12:56:21,143000000','DD/MM/RR HH24:MI:SSXFF'),null,null,null);
Insert into HELPDESSK.SLA_VIEW (ID_CASO,FECHA_CREACION,FECHA_CIERRE,TIEMPO_RESOLUCION,TIEMPO_PRIMER_RESPUESTA) values ('30',to_timestamp('27/09/25 08:17:44,369000000','DD/MM/RR HH24:MI:SSXFF'),null,null,null);
Insert into HELPDESSK.SLA_VIEW (ID_CASO,FECHA_CREACION,FECHA_CIERRE,TIEMPO_RESOLUCION,TIEMPO_PRIMER_RESPUESTA) values ('3',to_timestamp('16/09/25 09:38:21,682000000','DD/MM/RR HH24:MI:SSXFF'),to_timestamp('25/09/25 02:39:24,292000000','DD/MM/RR HH24:MI:SSXFF'),'+08 17:01:02.610000',null);
Insert into HELPDESSK.SLA_VIEW (ID_CASO,FECHA_CREACION,FECHA_CIERRE,TIEMPO_RESOLUCION,TIEMPO_PRIMER_RESPUESTA) values ('5',to_timestamp('16/09/25 15:30:01,831000000','DD/MM/RR HH24:MI:SSXFF'),null,null,null);
Insert into HELPDESSK.SLA_VIEW (ID_CASO,FECHA_CREACION,FECHA_CIERRE,TIEMPO_RESOLUCION,TIEMPO_PRIMER_RESPUESTA) values ('26',to_timestamp('27/09/25 03:03:36,391000000','DD/MM/RR HH24:MI:SSXFF'),null,null,null);
Insert into HELPDESSK.SLA_VIEW (ID_CASO,FECHA_CREACION,FECHA_CIERRE,TIEMPO_RESOLUCION,TIEMPO_PRIMER_RESPUESTA) values ('21',to_timestamp('26/09/25 23:41:24,615000000','DD/MM/RR HH24:MI:SSXFF'),null,null,null);
--------------------------------------------------------
--  DDL for Trigger TRG_ACTUALIZAR_ESTADO_CASO
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "HELPDESSK"."TRG_ACTUALIZAR_ESTADO_CASO" 
AFTER INSERT ON Historial_Caso
FOR EACH ROW
BEGIN
    UPDATE Casos
    SET id_estado_actual = :NEW.id_estado
    WHERE id_caso = :NEW.id_caso;
END;

/
ALTER TRIGGER "HELPDESSK"."TRG_ACTUALIZAR_ESTADO_CASO" ENABLE;
--------------------------------------------------------
--  DDL for Trigger TRG_CALCULAR_RESOLUCION
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "HELPDESSK"."TRG_CALCULAR_RESOLUCION" 
AFTER INSERT OR UPDATE ON Historial_Caso
FOR EACH ROW
DECLARE
    v_estado_cerrado NUMBER;
BEGIN
    -- Obtener el ID del estado "Cerrado"
    SELECT id_estado INTO v_estado_cerrado 
    FROM Estado_Caso 
    WHERE nombre = 'Cerrado';

    -- Si el nuevo historial es "Cerrado", actualizar el caso
    IF :NEW.id_estado = v_estado_cerrado THEN
        UPDATE Casos
        SET fecha_cierre = SYSTIMESTAMP,
            tiempo_resolucion = SYSTIMESTAMP - fecha_creacion
        WHERE id_caso = :NEW.id_caso;
    END IF;
END;
/
/
ALTER TRIGGER "HELPDESSK"."TRG_CALCULAR_RESOLUCION" ENABLE;
--------------------------------------------------------
--  Constraints for Table PRIORIDAD
--------------------------------------------------------

  ALTER TABLE "HELPDESSK"."PRIORIDAD" MODIFY ("ID_PRIORIDAD" NOT NULL ENABLE);
  ALTER TABLE "HELPDESSK"."PRIORIDAD" MODIFY ("NOMBRE" NOT NULL ENABLE);
  ALTER TABLE "HELPDESSK"."PRIORIDAD" ADD PRIMARY KEY ("ID_PRIORIDAD")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table DEPARTAMENTOS
--------------------------------------------------------

  ALTER TABLE "HELPDESSK"."DEPARTAMENTOS" MODIFY ("ID_DEPARTAMENTO" NOT NULL ENABLE);
  ALTER TABLE "HELPDESSK"."DEPARTAMENTOS" MODIFY ("NOMBRE" NOT NULL ENABLE);
  ALTER TABLE "HELPDESSK"."DEPARTAMENTOS" ADD PRIMARY KEY ("ID_DEPARTAMENTO")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table REPUESTOS
--------------------------------------------------------

  ALTER TABLE "HELPDESSK"."REPUESTOS" MODIFY ("ID_REPUESTO" NOT NULL ENABLE);
  ALTER TABLE "HELPDESSK"."REPUESTOS" MODIFY ("NOMBRE" NOT NULL ENABLE);
  ALTER TABLE "HELPDESSK"."REPUESTOS" ADD CHECK (stock >= 0) ENABLE;
  ALTER TABLE "HELPDESSK"."REPUESTOS" ADD CHECK (precio_unitario >= 0) ENABLE;
  ALTER TABLE "HELPDESSK"."REPUESTOS" ADD PRIMARY KEY ("ID_REPUESTO")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table NOTIFICACIONES
--------------------------------------------------------

  ALTER TABLE "HELPDESSK"."NOTIFICACIONES" MODIFY ("ID_NOTIFICACION" NOT NULL ENABLE);
  ALTER TABLE "HELPDESSK"."NOTIFICACIONES" ADD CHECK (estado IN ('Encolado','Enviado','Visto')) ENABLE;
  ALTER TABLE "HELPDESSK"."NOTIFICACIONES" ADD PRIMARY KEY ("ID_NOTIFICACION")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table ESTADO_CASO
--------------------------------------------------------

  ALTER TABLE "HELPDESSK"."ESTADO_CASO" MODIFY ("ID_ESTADO" NOT NULL ENABLE);
  ALTER TABLE "HELPDESSK"."ESTADO_CASO" MODIFY ("NOMBRE" NOT NULL ENABLE);
  ALTER TABLE "HELPDESSK"."ESTADO_CASO" ADD PRIMARY KEY ("ID_ESTADO")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table ENCUESTA_SATISFACCION
--------------------------------------------------------

  ALTER TABLE "HELPDESSK"."ENCUESTA_SATISFACCION" MODIFY ("ID_ENCUESTA" NOT NULL ENABLE);
  ALTER TABLE "HELPDESSK"."ENCUESTA_SATISFACCION" ADD CHECK (calificacion BETWEEN 1 AND 5) ENABLE;
  ALTER TABLE "HELPDESSK"."ENCUESTA_SATISFACCION" ADD PRIMARY KEY ("ID_ENCUESTA")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table EMPLEADO
--------------------------------------------------------

  ALTER TABLE "HELPDESSK"."EMPLEADO" MODIFY ("ID_EMPLEADO" NOT NULL ENABLE);
  ALTER TABLE "HELPDESSK"."EMPLEADO" MODIFY ("ID_DEPARTAMENTO" NOT NULL ENABLE);
  ALTER TABLE "HELPDESSK"."EMPLEADO" MODIFY ("NOMBRE" NOT NULL ENABLE);
  ALTER TABLE "HELPDESSK"."EMPLEADO" MODIFY ("APELLIDO" NOT NULL ENABLE);
  ALTER TABLE "HELPDESSK"."EMPLEADO" MODIFY ("CORREO" NOT NULL ENABLE);
  ALTER TABLE "HELPDESSK"."EMPLEADO" ADD CHECK (rol IN ('USUARIO','AGENTE','SUPERVISOR','ADMIN')) ENABLE;
  ALTER TABLE "HELPDESSK"."EMPLEADO" ADD CHECK (activo IN ('S','N')) ENABLE;
  ALTER TABLE "HELPDESSK"."EMPLEADO" ADD PRIMARY KEY ("ID_EMPLEADO")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "HELPDESSK"."EMPLEADO" ADD UNIQUE ("CORREO")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table SOLICITUD_REPUESTOS
--------------------------------------------------------

  ALTER TABLE "HELPDESSK"."SOLICITUD_REPUESTOS" ADD CHECK (cantidad > 0) ENABLE;
  ALTER TABLE "HELPDESSK"."SOLICITUD_REPUESTOS" ADD PRIMARY KEY ("ID_CASO", "ID_REPUESTO")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table USUARIOS
--------------------------------------------------------

  ALTER TABLE "HELPDESSK"."USUARIOS" MODIFY ("ID_USUARIO" NOT NULL ENABLE);
  ALTER TABLE "HELPDESSK"."USUARIOS" MODIFY ("ID_EMPLEADO" NOT NULL ENABLE);
  ALTER TABLE "HELPDESSK"."USUARIOS" MODIFY ("USERNAME" NOT NULL ENABLE);
  ALTER TABLE "HELPDESSK"."USUARIOS" MODIFY ("PASSWORD" NOT NULL ENABLE);
  ALTER TABLE "HELPDESSK"."USUARIOS" ADD CHECK (activo IN ('S','N')) ENABLE;
  ALTER TABLE "HELPDESSK"."USUARIOS" ADD PRIMARY KEY ("ID_USUARIO")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "HELPDESSK"."USUARIOS" ADD UNIQUE ("USERNAME")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table CASOS
--------------------------------------------------------

  ALTER TABLE "HELPDESSK"."CASOS" MODIFY ("ID_CASO" NOT NULL ENABLE);
  ALTER TABLE "HELPDESSK"."CASOS" MODIFY ("ID_EMPLEADO_SOLICITA" NOT NULL ENABLE);
  ALTER TABLE "HELPDESSK"."CASOS" MODIFY ("ID_TIPO_INCIDENCIA" NOT NULL ENABLE);
  ALTER TABLE "HELPDESSK"."CASOS" MODIFY ("TITULO" NOT NULL ENABLE);
  ALTER TABLE "HELPDESSK"."CASOS" MODIFY ("DESCRIPCION" NOT NULL ENABLE);
  ALTER TABLE "HELPDESSK"."CASOS" ADD PRIMARY KEY ("ID_CASO")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table HISTORIAL_CASO
--------------------------------------------------------

  ALTER TABLE "HELPDESSK"."HISTORIAL_CASO" MODIFY ("ID_HISTORIAL" NOT NULL ENABLE);
  ALTER TABLE "HELPDESSK"."HISTORIAL_CASO" ADD PRIMARY KEY ("ID_HISTORIAL")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table TIPO_INCIDENCIA
--------------------------------------------------------

  ALTER TABLE "HELPDESSK"."TIPO_INCIDENCIA" ADD PRIMARY KEY ("ID_TIPO")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "HELPDESSK"."TIPO_INCIDENCIA" MODIFY ("ID_TIPO" NOT NULL ENABLE);
  ALTER TABLE "HELPDESSK"."TIPO_INCIDENCIA" MODIFY ("TIPO" NOT NULL ENABLE);
--------------------------------------------------------
--  Ref Constraints for Table CASOS
--------------------------------------------------------

  ALTER TABLE "HELPDESSK"."CASOS" ADD CONSTRAINT "FK_CASO_EMPLEADO" FOREIGN KEY ("ID_EMPLEADO_SOLICITA")
	  REFERENCES "HELPDESSK"."EMPLEADO" ("ID_EMPLEADO") ENABLE;
  ALTER TABLE "HELPDESSK"."CASOS" ADD CONSTRAINT "FK_CASO_TIPO" FOREIGN KEY ("ID_TIPO_INCIDENCIA")
	  REFERENCES "HELPDESSK"."TIPO_INCIDENCIA" ("ID_TIPO") ENABLE;
  ALTER TABLE "HELPDESSK"."CASOS" ADD CONSTRAINT "FK_CASO_PRIORIDAD" FOREIGN KEY ("ID_PRIORIDAD")
	  REFERENCES "HELPDESSK"."PRIORIDAD" ("ID_PRIORIDAD") ENABLE;
  ALTER TABLE "HELPDESSK"."CASOS" ADD CONSTRAINT "FK_CASO_ESTADO_ACTUAL" FOREIGN KEY ("ID_ESTADO_ACTUAL")
	  REFERENCES "HELPDESSK"."ESTADO_CASO" ("ID_ESTADO") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table EMPLEADO
--------------------------------------------------------

  ALTER TABLE "HELPDESSK"."EMPLEADO" ADD CONSTRAINT "FK_EMPLEADO_DEPARTAMENTO" FOREIGN KEY ("ID_DEPARTAMENTO")
	  REFERENCES "HELPDESSK"."DEPARTAMENTOS" ("ID_DEPARTAMENTO") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table ENCUESTA_SATISFACCION
--------------------------------------------------------

  ALTER TABLE "HELPDESSK"."ENCUESTA_SATISFACCION" ADD FOREIGN KEY ("ID_CASO")
	  REFERENCES "HELPDESSK"."CASOS" ("ID_CASO") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table HISTORIAL_CASO
--------------------------------------------------------

  ALTER TABLE "HELPDESSK"."HISTORIAL_CASO" ADD FOREIGN KEY ("ID_CASO")
	  REFERENCES "HELPDESSK"."CASOS" ("ID_CASO") ENABLE;
  ALTER TABLE "HELPDESSK"."HISTORIAL_CASO" ADD FOREIGN KEY ("ID_ESTADO")
	  REFERENCES "HELPDESSK"."ESTADO_CASO" ("ID_ESTADO") ENABLE;
  ALTER TABLE "HELPDESSK"."HISTORIAL_CASO" ADD FOREIGN KEY ("ID_EMPLEADO")
	  REFERENCES "HELPDESSK"."EMPLEADO" ("ID_EMPLEADO") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table NOTIFICACIONES
--------------------------------------------------------

  ALTER TABLE "HELPDESSK"."NOTIFICACIONES" ADD FOREIGN KEY ("ID_CASO")
	  REFERENCES "HELPDESSK"."CASOS" ("ID_CASO") ENABLE;
  ALTER TABLE "HELPDESSK"."NOTIFICACIONES" ADD FOREIGN KEY ("ID_EMPLEADO")
	  REFERENCES "HELPDESSK"."EMPLEADO" ("ID_EMPLEADO") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table SOLICITUD_REPUESTOS
--------------------------------------------------------

  ALTER TABLE "HELPDESSK"."SOLICITUD_REPUESTOS" ADD FOREIGN KEY ("ID_CASO")
	  REFERENCES "HELPDESSK"."CASOS" ("ID_CASO") ENABLE;
  ALTER TABLE "HELPDESSK"."SOLICITUD_REPUESTOS" ADD FOREIGN KEY ("ID_REPUESTO")
	  REFERENCES "HELPDESSK"."REPUESTOS" ("ID_REPUESTO") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table USUARIOS
--------------------------------------------------------

  ALTER TABLE "HELPDESSK"."USUARIOS" ADD CONSTRAINT "FK_LOGIN_EMPLEADO" FOREIGN KEY ("ID_EMPLEADO")
	  REFERENCES "HELPDESSK"."EMPLEADO" ("ID_EMPLEADO") ENABLE;
